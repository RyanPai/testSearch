{"version":3,"sources":["App.js","serviceWorker.js","index.js"],"names":["Box","styled","div","_templateObject","spacing","palette","App","props","_this","Object","_Users_Ryan_dev_www_ovvooptics_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","_Users_Ryan_dev_www_ovvooptics_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_Users_Ryan_dev_www_ovvooptics_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","state","isSigin","files","childrens","series","searchMethod","inputText","downloadType","product","upc","downloadDone","searchItem","downloadLoading","percen","url","base64","pdf","loadClient","bind","_Users_Ryan_dev_www_ovvooptics_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__","loadFiles","loadSeries","seriesInit","onDownloadZIP","downloadData","onSaveFileZIP","window","gapi","load","initClient","client","init","apiKey","clientId","scope","then","error","console","log","isSignin","auth2","getAuthInstance","signIn","err","_this2","setState","event","authenticate","_this3","drive","list","response","_Users_Ryan_dev_www_ovvooptics_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","result","items","id","_this4","q","concat","map","item","res","length","type","title","_this5","i","_this6","_this$state","hint","split","replace","filter","index","key","join","data","s","setTimeout","qItem","fileExtension","downloadUrl","done","status","_this7","_ref","axios","method","responseType","headers","Authorization","auth","getToken","token_type","access_token","Blob","Buffer","toString","push","_this8","keys","doneItems","Math","ceil","zip","JSZip","folder","file","binary","generateAsync","content","FileSaver","saveAs","alert","e","target","value","checked","_Users_Ryan_dev_www_ovvooptics_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","_this9","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","className","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_22___default","position","color","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_23___default","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_28___default","variant","p","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_24___default","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_26___default","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_25___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_27___default","onClick","handleAuthClick","_material_ui_core_LinearProgress__WEBPACK_IMPORTED_MODULE_32___default","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_14___default","container","xs","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_30___default","label","multiline","rowsMax","onChange","onInputChange","margin","style","width","_material_ui_core_FormControlLabel__WEBPACK_IMPORTED_MODULE_16___default","control","_material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_15___default","onDownloadType","disabled","_material_ui_core_Table__WEBPACK_IMPORTED_MODULE_17___default","_material_ui_core_TableHead__WEBPACK_IMPORTED_MODULE_20___default","_material_ui_core_TableRow__WEBPACK_IMPORTED_MODULE_21___default","_material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_19___default","align","_material_ui_core_TableBody__WEBPACK_IMPORTED_MODULE_18___default","component","Component","Boolean","location","hostname","match","ReactDOM","render","react_default","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c3a96c9e.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport FileSaver from 'file-saver';\nimport JSZip from 'jszip' \nimport './App.css';\nimport Grid from '@material-ui/core/Grid';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport styled from 'styled-components';\nimport TextField from '@material-ui/core/TextField';\nimport { spacing, palette } from '@material-ui/system';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nconst Box = styled.div`${spacing}${palette}`;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSigin: false,\n      files: [],\n      childrens: [],\n      series: {},\n      searchMethod: 'input',\n      inputText: '',\n      downloadType: {\n        product: true,\n        upc: false\n      },\n      downloadDone: false,\n      searchItem: {},\n      downloadLoading: false,\n      percen: 0,\n      url: '',\n      base64: '',\n      pdf: ''\n    }\n\n    this.loadClient = this.loadClient.bind(this);\n    this.loadFiles = this.loadFiles.bind(this);\n    this.loadSeries = this.loadSeries.bind(this)\n    this.seriesInit = this.seriesInit.bind(this);\n    this.onDownloadZIP = this.onDownloadZIP.bind(this);\n    this.downloadData = this.downloadData.bind(this);\n    this.onSaveFileZIP = this.onSaveFileZIP.bind(this);\n  }\n  componentDidMount() {\n    const { gapi } = window;\n    gapi.load('client:auth2', this.initClient.bind(this));\n  }\n\n  initClient() {\n    const { gapi } = window;\n\n    gapi.client.init({\n      apiKey: 'AIzaSyAAKJOAw6uBXpKhpAkXQy0e0pPFxpNMraM',\n      clientId: '1090032071436-ejoeke6m3hupc8i8p41u6tf2pl1scmld.apps.googleusercontent.com',\n      // discoveryDocs: \"https://content.googleapis.com/discovery/v1/apis/drive/v2/rest\",\n      scope: 'https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/drive.photos.readonly https://www.googleapis.com/auth/drive.readonly'\n    }).then( () => {\n      // Listen for sign-in state changes.\n      // gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n      // this.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n    }, (error) => {\n      console.log(error)\n    }); \n  }\n  updateSigninStatus (isSignin) {\n    console.log(isSignin)\n  }\n  authenticate() {\n    const { gapi } = window;\n    return gapi.auth2.getAuthInstance()\n      .signIn({scope: \"https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/drive.photos.readonly https://www.googleapis.com/auth/drive.readonly\"})\n      .then(function() { console.log(\"Sign-in successful\"); },\n            function(err) { console.error(\"Error signing in\", err); });\n  }\n  loadClient() {\n    const { gapi } = window;\n    return gapi.client.load(\"https://content.googleapis.com/discovery/v1/apis/drive/v2/rest\")\n      .then(() => { \n        console.log(\"GAPI client loaded for API\"); \n        this.setState({isSigin: true});\n        /* gapi.client.drive.files.list({\n          \"q\": \"title='OVVO Product / UPC Finder'\"\n        })\n          .then((res) => {\n            this.loadSeries(res.result.items[0].id);\n          },\n          (err) => { console.error(\"Execute error\", err);}) */\n        \n      },\n      (err) => { console.error(\"Error loading GAPI client for API\", err); });\n  }\n  handleAuthClick(event) {\n    this.authenticate()\n    .then(this.loadClient)\n  }\n  loadFiles() {\n    const { gapi } = window;\n    \n    gapi.client.drive.files.list({})\n      .then(\n        (response) => {\n          this.setState({files: [...response.result.items]})\n        },\n        (err) => { console.error(\"Execute error\", err);}\n      );\n  }\n  loadSeries (id) {\n    const { gapi } = window;\n    //project\n    gapi.client.drive.files.list({\n      \"q\": `'${id}' in parents`\n    })\n    .then((response) => {\n      response.result.items.map(item => {\n        gapi.client.drive.files.list({\n          \"q\": `'${item.id}' in parents`\n        })\n        .then((res) => {\n          if (res.result.items.length) {\n            res.result.type = item.title;\n            this.state.childrens = [...this.state.childrens, res.result];\n            this.seriesInit()\n          }\n        }, (err) => { console.error(\"Execute error\", err); })\n      })\n    },\n    (err) => { console.error(\"Execute error\", err); })\n  }\n\n  seriesInit() {\n    const { childrens } = this.state;\n\n    if (childrens.length >=2) {\n      childrens.map((item) =>{\n        item.items.map((i) =>{\n          this.state.series[i.title] = this.state.series[i.title] || {};\n          this.state.series[i.title][(item.type === 'UPC' ? 'upc' : 'product')] = i.id;\n        })\n      })\n    }\n  }\n  onDownloadZIP() {\n    const { gapi } = window;\n    const { searchMethod, downloadType } = this.state;\n    this.setState({downloadLoading: true, downloadDone: false, percen: 0, hint: ''});\n    this.state.searchItem = {};\n    if (searchMethod == 'input') {\n      let data = this.state.inputText.split(/[\\n||,]/);\n      let searchQuery = data.map((item) =>{\n        let ary = item.replace(/([A-Z]+)|([^A-Z]+)/ig, '-$1-$2').split(/[-_\\/]/).filter((i) =>{ return i !='' && i != ' '})\n        return ary;\n      })\n\n      searchQuery.map((item, index) => {\n        if (item[0]) {\n          let key = item.join('-');\n          this.state.searchItem[key] = {\n            data: []\n          };\n          let q = `fullText contains '${item[0]}'`;\n          item.map((s, i) =>{\n            if (i > 0) {\n              q += ` and fullText contains '${s}'`;\n            }\n          });\n          \n          setTimeout(() =>{\n\n          \n          gapi.client.drive.files.list({\n            q\n          })\n            .then((res) => {\n              this.state.searchItem[key].items = res.result.items.filter((qItem) =>{\n                if(downloadType.product && downloadType.upc && ( qItem.fileExtension === 'pdf' ||  qItem.fileExtension === 'jpg' ||  qItem.fileExtension === 'jpeg' ||  qItem.fileExtension === 'png')) {\n                  return qItem;\n                } else if(downloadType.product && qItem.fileExtension && qItem.fileExtension !== 'pdf'){\n                  return qItem.fileExtension !== 'pdf';\n                } else if(downloadType.upc && qItem.fileExtension && qItem.fileExtension == 'pdf'){\n                  return qItem.fileExtension === 'pdf';\n                } else {\n                  return false;\n                }\n              })\n              this.state.searchItem[key].items.map((qItem) =>{\n                this.downloadData({key,url: qItem.downloadUrl,type: qItem.fileExtension, title: qItem.title })\n              })\n              \n\n              if (!res.result.items.length || !this.state.searchItem[key].items.length) {\n                this.state.searchItem[key].done = true;\n                this.state.searchItem[key].status = 'fail';\n                this.onSaveFileZIP();\n              }\n              \n            },(err) => { \n              console.error(\"Execute error\", err);\n            })\n          },90 * index)  \n        }\n      });\n    } else {\n      console.log(this.state.searchItem)\n    }\n  }\n\n  downloadData({key, url, type, title}) {\n    const { gapi } = window;\n\n    axios({\n      method:'get',\n      responseType: 'arraybuffer',\n      url,\n      headers: {\n        Authorization: `${gapi.auth.getToken().token_type} ${gapi.auth.getToken().access_token}`\n      }\n    })\n    .then((res) => {\n      let data;\n      if (type = 'pdf') {\n        data = new Blob([res.data], {type: 'application/pdf',})\n      } else {\n        data = new Buffer(res.data, \"binary\").toString(\"base64\");\n      }\n\n      this.state.searchItem[key].data.push({data, type, key, title});\n      \n      if (this.state.searchItem[key].items.length === this.state.searchItem[key].data.length) {\n        this.state.searchItem[key].done = true;\n        this.onSaveFileZIP();\n      }\n    })\n    \n  }\n\n  onSaveFileZIP() {\n    const { searchItem } = this.state;\n    let items = Object.keys(searchItem).map((item) => item);\n\n    let doneItems = Object.keys(searchItem).filter((key) =>{\n      return searchItem[key].done;\n    })\n    this.setState({percen: Math.ceil(doneItems.length / items.length * 100)})\n    console.log(items.length , doneItems.length)\n    if(items.length === doneItems.length) {\n      console.log('start down zip')\n      this.setState({hint: 'ZIP Compressing'})\n      const zip = new JSZip();\n\n      Object.keys(searchItem).map((key) =>{\n        searchItem[key].data.map((item) =>{\n          const folder = zip.folder(item.key);\n          if (item.type === 'pdf') {\n            folder.file(item.title, item.data, { binary: true });\n          } else {\n            folder.file(item.title, item.data, {base64: true});\n          }\n        })\n      })\n      \n      if (Object.keys(zip.files).length) {\n        zip.generateAsync({type:\"blob\"})\n        .then((content) => {\n            // see FileSaver.js\n            FileSaver.saveAs(content, \"OVVO_Product.zip\");\n            this.setState({downloadLoading: false, downloadDone: true});\n        });\n      } else {\n        alert('Nothing download');\n        this.setState({downloadLoading: false, downloadDone: true});\n      }\n    }\n  }\n  onSearchMethod(e) {\n    this.setState({searchMethod: e.target.value})\n  }\n  onInputChange(e) {\n    this.setState({inputText: e.target.value})\n  }\n  onSeriesChecked(key, e) {\n    let series = this.state.series;\n    series[key].checked = e.target.checked;\n    this.setState({series: {...series}})\n  }\n  onDownloadType(key, e) {\n    let downloadType = this.state.downloadType;\n    downloadType[key] = e.target.checked;\n    this.setState({downloadType: {...downloadType}})\n  }\n  render() {\n    return (\n      <div className=\"App root\">\n        <AppBar position=\"static\" color=\"default\">\n          <Toolbar>\n            <Typography variant=\"h6\" color=\"inherit\">\n              OVVO Product / UPC Finder\n            </Typography>\n          </Toolbar>\n        </AppBar>\n        {\n          !this.state.isSigin &&\n          <Box p={2}>\n            <Card>\n              <CardContent>\n                Log in to Google Drive\n              </CardContent>\n              <CardActions>\n                <Button variant=\"contained\" color=\"primary\" onClick={this.handleAuthClick.bind(this)}>Log in</Button>\n              </CardActions>\n            </Card>\n          </Box>\n        }\n        {\n          this.state.isSigin &&\n          <Box p={2}>\n          {\n            this.state.downloadLoading &&\n            <div>\n              <br />\n              <LinearProgress variant=\"query\" />\n              <br />\n              {`${this.state.percen}% ${this.state.hint}`}\n            </div>\n          }\n          <Card>\n            <CardContent>\n              <Grid container spacing={24}>\n                 {/*<Grid item xs={12}>\n                  <FormControl component=\"fieldset\">\n                    <FormLabel component=\"legend\">Search Method</FormLabel>\n                    <RadioGroup\n                      row\n                      aria-label=\"searchMethod\"\n                      name=\"searchMethod\"\n                      value={this.state.searchMethod}\n                      onChange={this.onSearchMethod.bind(this)}\n                    >\n                      <FormControlLabel\n                        value=\"input\"\n                        control={<Radio />}\n                        label=\"By product model\"\n                      />\n                      <FormControlLabel value=\"series\" control={<Radio />} label=\"By collection\" />\n                    </RadioGroup>\n                  </FormControl>\n                </Grid>*/}\n                <Grid item xs={12}>\n                  <TextField\n                    id=\"outlined-multiline-flexible\"\n                    label=\"Model name / model color\"\n                    multiline\n                    rowsMax=\"10\"\n                    value={this.state.inputText}\n                    onChange={this.onInputChange.bind(this)}\n                    margin=\"normal\"\n                    variant=\"outlined\"\n                    style={{width: '100%'}}\n                  />\n                </Grid>\n                {/* {\n                  this.state.searchMethod == 'series' &&\n                  <Grid item xs={12}>\n                    {\n                      Object.keys(this.state.series).map((key,index) =>{\n                        return <FormControlLabel  key={index}\n                            control={\n                              <Checkbox\n                                checked={this.state.series.checked}\n                                value={key}\n                                color=\"primary\"\n                                onChange={this.onSeriesChecked.bind(this, key)}\n                              />\n                            }\n                            label={key}\n                          />\n                      })\n                    }\n                  </Grid>\n                } */}\n                  <Grid item xs={12}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={this.state.downloadType.product}\n                          value='product'\n                          color=\"primary\"\n                          onChange={this.onDownloadType.bind(this, 'product')}\n                        />\n                      }\n                      label='Product Image'\n                    />\n\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={this.state.downloadType.upc}\n                          value='upc'\n                          color=\"primary\"\n                          onChange={this.onDownloadType.bind(this, 'upc')}\n                        />\n                      }\n                      label='UPC'\n                    />\n                  </Grid>\n                </Grid>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent>\n                <Button disabled={this.state.downloadLoading} variant=\"contained\" color=\"primary\" onClick={this.onDownloadZIP}>Download ZIP</Button>\n              </CardContent>\n              {\n                this.state.downloadDone &&\n                <Table >\n                  <TableHead>\n                    <TableRow>\n                      <TableCell>folder Name</TableCell>\n                      <TableCell>Status</TableCell>\n                      <TableCell align=\"right\">Itmes</TableCell>\n                      <TableCell align=\"right\">Total</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {Object.keys(this.state.searchItem).map(key => {\n                      return (\n                        <TableRow key={key}>\n                          <TableCell component=\"th\" scope=\"row\">\n                            {key}\n                          </TableCell>\n                          <TableCell component=\"th\" scope=\"row\">\n                            { this.state.searchItem[key].status || 'success'}\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            {\n                              this.state.searchItem[key].data.map((item, i) =>{\n                                return <div key={i}>{item.title}</div>\n                              })\n                            }\n                            </TableCell>\n                          <TableCell align=\"right\">{this.state.searchItem[key].data.length}</TableCell>\n                        </TableRow>\n                      );\n                    })\n                  }\n                  </TableBody>\n                </Table>\n              }\n            </Card>\n          </Box>\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}